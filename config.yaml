# LLM2Deck Configuration
# Uncomment providers to enable them

# Global Defaults
# These values apply to all providers unless overridden per-provider
defaults:
  timeout: 120.0              # Request timeout in seconds
  temperature: 0.4            # Sampling temperature
  max_tokens: null            # Max tokens (null = API default)
  max_retries: 5              # Max retry attempts for API requests
  json_parse_retries: 5       # Max retries for JSON parsing
  retry_delay: 1.0            # Base delay between retries
  retry_min_wait: 1.0         # Minimum wait for exponential backoff
  retry_max_wait: 10.0        # Maximum wait for exponential backoff

# Provider Configuration
# Each provider can override defaults with its own timeout, temperature, etc.
providers:
  cerebras:
    enabled: true
    model: "gpt-oss-120b"
    reasoning_effort: "high"

  openrouter:
    enabled: false
    model: "xiaomi/mimo-v2-flash:free"
    # base_url: "https://openrouter.ai/api/v1"  # Optional, has default

  nvidia:
    enabled: false
    model: "moonshotai/kimi-k2-thinking"
    timeout: 900                                 # Override default timeout
    max_tokens: 16384
    top_p: 0.95
    # base_url: "https://integrate.api.nvidia.com/v1"  # Optional, has default

  g4f:
    enabled: false
    model: "claude-opus-4-5-20251101-thinking-32k"
    provider_name: "LMArena"

  canopywave:
    enabled: false
    model: "zai/glm-4.7"
    timeout: 900
    max_tokens: 16384
    # base_url: "https://api.xiaomimimo.com/v1"  # Optional, has default

  baseten:
    enabled: false
    model: "zai-org/GLM-4.7"
    strip_json_markers: false
    # base_url: "https://inference.baseten.co/v1"  # Optional, has default

  gemini_webapi:
    enabled: false
    # Uses credentials from gemini_creds.json

  google_genai:
    enabled: false
    model: "gemini-3-flash-preview"
    thinking_level: "high"
    temperature: 1.0                             # Gemini 3 recommends 1.0

  google_antigravity:
    enabled: true
    models:
      - "gemini-3-pro-preview"
      - "gemini-claude-opus-4-5-thinking"
    timeout: 900
    max_tokens: 16384
    # base_url: "http://127.0.0.1:8317/v1"  # Optional, has default

# Generation Settings
generation:
  concurrent_requests: 7
  request_delay: 1  # Delay in seconds between starting each request (prevents rate limiting)
  max_retries: 10
  json_parse_retries: 10

  # Combiner Configuration
  # Specify which provider/model combines cards from all generators.
  # If not set, the first enabled provider is used as combiner.
  combiner:
    provider: google_antigravity   # Provider name from providers section
    model: gemini-claude-opus-4-5-thinking  # Model to use for combining
    also_generate: true            # If true, combiner also does initial generation
                                   # If false, combiner only combines (not used for generation)

  # Formatter Configuration
  # Specify which provider/model formats the combiner output into valid JSON.
  # Use this when your combiner model is intelligent but unreliable at JSON output.
  # If not set, combiner must output valid JSON directly (legacy behavior).
  formatter:
    provider: cerebras             # Provider name from providers section
    model: gpt-oss-120b            # Model to use for formatting
    also_generate: false           # If true, formatter also does initial generation
                                   # If false, formatter only formats (not used for generation)

# Database Settings
database:
  path: "llm2deck.db"

# Paths Configuration
paths:
  archival_dir: "anki_cards_archival"   # Directory for archived JSON files
  markdown_dir: "anki_cards_markdown"   # Directory for exported Markdown files
  timestamp_format: "%Y%m%dT%H%M%S"     # Timestamp format for output files

  # API Key File Paths (optional)
  # These can be overridden by environment variables (higher priority)
  # Environment variables: CEREBRAS_KEYS_FILE_PATH, OPENROUTER_KEYS_FILE_PATH, etc.
  # key_paths:
  #   cerebras: "api_keys.json"
  #   openrouter: "openrouter_apikeys.json"
  #   gemini: "python3ds.json"
  #   nvidia: "nvidia_keys.json"
  #   canopywave: "canopywave_keys.json"
  #   baseten: "baseten_keys.json"
  #   google_genai: "google_genai_keys.json"

# Subject Settings
# Built-in subjects: leetcode, cs, physics
# Custom subjects can be added with their own prompts and questions
subjects:
  # Built-in subjects
  leetcode:
    enabled: true
  cs:
    enabled: true
  physics:
    enabled: true

  # Example custom subject (uncomment to use)
  # example:
  #   enabled: true
  #   deck_prefix: "Example"                              # Anki deck name prefix
  #   deck_prefix_mcq: "Example_MCQ"                      # Optional, defaults to {deck_prefix}_MCQ
  #   prompts_dir: "src/data/prompts/example"             # Directory containing initial.md and combine.md
  #   questions_file: "src/data/example_questions.json"   # Questions in categorized format

  # Custom subject template:
  # my_subject:
  #   enabled: true
  #   deck_prefix: "MySubject"
  #   prompts_dir: "path/to/prompts"       # Must contain initial.md and combine.md
  #   questions_file: "path/to/questions.json"
